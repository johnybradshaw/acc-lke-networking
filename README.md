# Networking for Linode Kubernetes Environments (LKE) on Akamai Connected Cloud (ACC)
<!-- BEGIN_TF_DOCS -->
<!-- The module-name will be auto generated by the script -->
# acc-lke-networking *module*

This module creates a [Linode Kubernetes (LKE) Cluster](https://www.linode.com/docs/products/compute/kubernetes/) on the [Akamai Connected Cloud](https://www.akamai.com/solutions/cloud-computing) using [Terraform](https://terraform.io).

## Important

The readme.md has the following sections:

- Requirements - Min requirements for the module to run
- Providers - Providers required by the module
- Inputs- Inputs to the module
- Outputs - Outputs from the module
- Usage - How to use the module

#### Requirements

The following requirements are needed by this module:

- <a name="requirement_terraform"></a> [terraform](#requirement_terraform) (>= 1.5.7)

- <a name="requirement_helm"></a> [helm](#requirement_helm) (>= 2.11.0)

- <a name="requirement_kubernetes"></a> [kubernetes](#requirement_kubernetes) (>= 2.23.0)

- <a name="requirement_linode"></a> [linode](#requirement_linode) (>= 2.9.3)

#### Providers

The following providers are used by this module:

- <a name="provider_linode"></a> [linode](#provider_linode) (2.10.1)

#### Required Inputs

The following input variables are required:

##### <a name="input_linode_config"></a> [linode_config](#input_linode_config)

Description: n/a

Type:

```hcl
object({
    api_token = string
  })
```

##### <a name="input_lke_cluster_id"></a> [lke_cluster_id](#input_lke_cluster_id)

Description: The ID of the LKE cluster

Type: `string`

#### Optional Inputs

The following input variables are optional (have default values):

##### <a name="input_lke_nodebalancer"></a> [lke_nodebalancer](#input_lke_nodebalancer)

Description: values for the nodebalancer

Type:

```hcl
object({
    client_conn_throttle = string
  })
```

Default:

```json
{
  "client_conn_throttle": "20"
}
```

#### Outputs

The following outputs are exported:

##### <a name="output_lke_firewall_id"></a> [lke_firewall_id](#output_lke_firewall_id)

Description: The ID of the firewall created for the LKE cluster.

##### <a name="output_lke_firewall_url"></a> [lke_firewall_url](#output_lke_firewall_url)

Description: The link to the firewall created for the LKE cluster.

##### <a name="output_lke_nodebalancer"></a> [lke_nodebalancer](#output_lke_nodebalancer)

Description: The NodeBalancer created for the LKE cluster.

## Usage

Sample usage of this module is as shown below. For detailed info, look at inputs and outputs.

### Step 1

In your main.tf, add the following code:
<!-- NOTE: The package-source and version x.x.x will be auto populated by the ci job. You do not need to change anything here. -->
```hcl

# Create the Networking stack
module "lke" {
  source = "./modules/lke-networking"
  providers = {
    linode.default      = linode
  }

  linode_config = var.linode_config # Pass the Linode configuration to the module
  lke_cluster   = var.lke_cluster # Pass the LKE cluster configuration to the module
}

output "lke-networking" {
  description = "Important outputs from LKE Networking."
  value = module.lke-networking # Output from the lke module
}

```

#### Note

- **lke** is the name of the module. You can use any name you want.

### Step 2

In your provider.tf, add the following code, if it doesn't exist already:

```hcl

terraform {
    required_version = ">= 1.5.7"

    required_providers {
        linode = {
            source = "linode/linode"
            version = ">= 2.9.3"
            configuration_aliases = [ linode.default ]
        }
    }
}

provider "linode" {
    alias = "default"
    token = var.linode_config.api_token
}

```

### Step 3

Verify your settings using the following command:

``` bash
terraform init
terraform plan
```

### Step 4

Apply the changes

``` bash
terraform apply
```
<!-- END_TF_DOCS -->